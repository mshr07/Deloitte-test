This Project will help you to deploy sam ple spring Boot Application on K8s using jenkins as CI and Harness as CD.
As a part of this Project below setup has been done

1. Installed Docker desktop on Machine and enble k8s on the same. Install Docker and enable Kubernetes cluster on local( refer the video - https://www.youtube.com/watch?v=8h4FoWK7tIA)
2. Add below config in settings under Docker engine - Update the json with below values
{
  "builder": {
    "gc": {
      "defaultKeepStorage": "40GB",
      "enabled": true,
      "experimental": true,
      "features": {
        "buildkit": true
      },
      "hosts": [
        "tcp://0.0.0.0:2375",
        "npipe://"
      ],
      "insecure-registries": [
        "localhost:5000"
      ]
    }
  }
}

3. Create a Harness account and integrate with local k8s. (Refer the video - https://youtube.com/watch?v=k-f1nbgGkww&si=v__IVHrYbi7b8rS7).

4. Install Kubectl in local k8s.

5. Create sample app & Docker files for the same. Also write an yaml files for the same. Harness deployment and Harness Helm Deployment. ( Find all the yaml files and code in repo - https://github.com/Deloitte-Default/carnia.git Branch - POC_CD_Harness)

6. Install Jenkins on the local k8s refer the Jenkins folder. First jenkins-pv.yaml run using kubectl & then run jenkins-deployment.yaml. Use new item on the jenkins to create job.

7. Add the GitHUb configuration in crediental. Use github token for the communication with Jenkins.

8. Install Sonarqube on the k8s & for this follow the sonarqube folder. It has 4 yaml files run those in below sequence postgresql-service.yaml, postgresql-deployment.yaml, sonarqube-service.yaml, sonarqube-deployment.yaml.

9. Configure SonarQube in Jenkins also use sonarqube cluster ip for the configuration in Jenkins pipeline. Refer the Jenkins pipeline code in Github.

10. Configure docker and add jfrog artifact in jenkins.

11. Login to Harness for CD deployment configuration.

12. Under Project Setting Add K8s, GitHub & jfrog connector. While adding connector add secrets for jfrog, docker and GitHub.

13. Under Project Setting Add service in Harness refer the Service.yaml file in Harness-CD folder. 

14. Under Project Setting Add environments refer the environment.yaml file and in the environment add infrastructure file in configuration.

15. Under pipeline add pipeline.yaml file from Harness-CD to create a Pipeline. Run the peipline.

16. Run below Kubectl coammnd to check pod, service and deployment.
	a. Kubectl get pod - Get all the pods
	b. Kubectl get deployments - To get the all the deployments
	c. Kubectl get svc - To get all the services

